# ุฑูุน ุฎุทุง 401 - API Key

## โ ูพุดุฑูุช

ุฎุทุง CORS ุฑูุน ุดุฏ! ุญุงูุง ุจู ุฎุทุง 401 ุฑุณุฏู ฺฉู ุนู:
- โ CORS ฺฉุงุฑ ูโฺฉูุฏ
- โ ุฏุฑุฎูุงุณุช ุจู API ูโุฑุณุฏ
- โ API Key ูุดฺฉู ุฏุงุฑุฏ

## ๐ ุจุฑุฑุณ

ุฎุทุง 401 ุนู API Key ุฏุฑ runtime ุฏุฑ ุฏุณุชุฑุณ ูุณุช ุง ุงุดุชุจุงู ุงุณุช.

## โ ุฑุงูโุญู

### 1. ุจุฑุฑุณ Environment Variables

```bash
vercel env ls
```

ุจุงุฏ `OPENAI_API_KEY` ุฑุง ุจุฑุง Production ุจุจูุฏ.

### 2. ุงฺฏุฑ ูุฌูุฏ ูุฏุงุฑุฏ ุง ุงุดุชุจุงู ุงุณุช:

```bash
# ุญุฐู (ุงฺฏุฑ ูุฌูุฏ ุฏุงุฑุฏ)
vercel env rm OPENAI_API_KEY production

# ุงุถุงูู ฺฉุฑุฏู ูุฌุฏุฏ
vercel env add OPENAI_API_KEY production
```

ููุช ุงุฒ ุดูุง ุฎูุงุณุชุ ุงู ููุฏุงุฑ ุฑุง ูุงุฑุฏ ฺฉูุฏ:
```
YOUR_OPENAI_API_KEY
```

### 3. Deploy ูุฌุฏุฏ (ููู!)

```bash
vercel --prod
```

**โ๏ธ ููู**: ุจุนุฏ ุงุฒ ุชูุธู Environment Variableุ ุญุชูุงู ุจุงุฏ deploy ฺฉูุฏ.

### 4. ุจุฑุฑุณ ูุงฺฏโูุง

ุฏุฑ Vercel Dashboard:
1. ุจู ุขุฎุฑู deployment ุจุฑูุฏ
2. ุจู ุชุจ "Logs" ุจุฑูุฏ
3. ฺฉ ุฏุฑุฎูุงุณุช ุชุณุช ุจูุฑุณุชุฏ
4. ูุงฺฏโูุง ุฑุง ุจุฑุฑุณ ฺฉูุฏ

ุจุงุฏ ุงู ุฑุง ุจุจูุฏ:
```
HAS_KEY true
KEY_PREFIX sk-proj
TRANSCRIBE: Environment check: {
  apiKeyPresent: true,
  apiKeyPrefix: "sk-proj-..."
}
```

ุงฺฏุฑ `HAS_KEY false` ุง `apiKeyPresent: false` ุจุงุดุฏุ ุนู API Key ุฏุฑ runtime ุฏุฑ ุฏุณุชุฑุณ ูุณุช.

## ๐ง ุงฺฏุฑ ูููุฒ 401 ูโุฏูุฏ

### ุจุฑุฑุณ 1: ูุทูุฆู ุดูุฏ deployment ุฌุฏุฏ ุงูุฌุงู ุดุฏู

```bash
vercel ls
```

ุขุฎุฑู deployment ุจุงุฏ ฺฉูุชุฑ ุงุฒ 1 ุฏููู ูพุด ุจุงุดุฏ.

### ุจุฑุฑุณ 2: ุจุฑุฑุณ API Key ุฏุฑ OpenAI

1. ุจู https://platform.openai.com/api-keys ุจุฑูุฏ
2. ูุทูุฆู ุดูุฏ API Key ูุนุงู ุงุณุช
3. ุงฺฏุฑ "never used" ุงุณุชุ ุนู ุฏุฑุฎูุงุณุช ุงุตูุงู ููโุฑุณุฏ (ุงูุง ูุง ูโุฏุงูู ฺฉู ูโุฑุณุฏ ฺูู 401 ูโุฏูุฏ)

### ุจุฑุฑุณ 3: ุชุณุช ูุณุชูู

```bash
curl -X POST https://cutup-ln74y877z-hamidreza-askarizadehs-projects.vercel.app/api/transcribe \
  -H "Content-Type: application/json" \
  -d "{\"audioUrl\": \"data:audio/mpeg;base64,test\"}" \
  -v
```

ุงฺฏุฑ 401 ูโุฏูุฏุ API Key ูุดฺฉู ุฏุงุฑุฏ.
ุงฺฏุฑ 500 ูโุฏูุฏุ ูุดฺฉู ุฏฺฏุฑ ุงุณุช.

## ๐ ฺฺฉโูุณุช

- [x] CORS ุฑูุน ุดุฏ
- [ ] `vercel env ls` ุจุฑุฑุณ ุดุฏู
- [ ] API Key ุจุฑุง Production ุชูุธู ุดุฏู
- [ ] `vercel --prod` ุงุฌุฑุง ุดุฏู
- [ ] ูุงฺฏโูุง ุจุฑุฑุณ ุดุฏู (`HAS_KEY true` ุจุงุฏ ุจุงุดุฏ)
- [ ] ุชุณุช ุงูุฌุงู ุดุฏู

## ๐ฏ ุจุนุฏ ุงุฒ ุฑูุน 401

ููุช API Key ุฏุฑุณุช ุชูุธู ุดุฏ:
1. ุจุงุฏ ุฎุทุง 401 ุจุฑุทุฑู ุดูุฏ
2. ุฏุฑุฎูุงุณุช ุจู OpenAI ูโุฑุณุฏ
3. Transcription ุงูุฌุงู ูโุดูุฏ
4. ุณูพุณ Summarization ุงูุฌุงู ูโุดูุฏ

## โ๏ธ ูฺฉุชู

ุฎุทุง "No such renderer" ฺฉ warning ุงุณุช ู ูุนูููุงู ูุดฺฉู ุงุฌุงุฏ ููโฺฉูุฏ. ูโุชูุงูุฏ ุขู ุฑุง ูุงุฏุฏู ุจฺฏุฑุฏ.


# ุงูุฒุงุด ุธุฑูุช ูพุฑุฏุงุฒุด ูุงูโูุง ุจุฒุฑฺฏ

## ๐ ุชุบุฑุงุช ุงูุฌุงู ุดุฏู

### 1. ุงูุฒุงุด ูุญุฏูุฏุช ุญุฌู ูุงู
- **ูุจู:** 4MB ุจุฑุง uploadุ 25MB ุจุฑุง YouTube
- **ุจุนุฏ:** 100MB ุจุฑุง ูุฑ ุฏู (ุจุง ูพุฑุฏุงุฒุด chunk ุจุฑุง ูุงูโูุง > 25MB)

### 2. ูพุฑุฏุงุฒุด Chunk ุจุฑุง ูุงูโูุง ุจุฒุฑฺฏ
- ูุงูโูุง ุจุฒุฑฺฏุชุฑ ุงุฒ 25MB ุจู ุตูุฑุช ุฎูุฏฺฉุงุฑ ุจู chunk ูุง 20MB ุชูุณู ูโุดููุฏ
- ูุฑ chunk ุจู ุตูุฑุช ุฌุฏุงฺฏุงูู ูพุฑุฏุงุฒุด ูโุดูุฏ
- ูุชุงุฌ ุจุง ุญูุธ ุฒูุงูโุจูุฏ ุชุฑฺฉุจ ูโุดููุฏ

### 3. ูุงูโูุง ุชุบุฑ ุงูุชู
- `api/upload.js` - ุงูุฒุงุด ูุญุฏูุฏุช ู ุงุถุงูู ฺฉุฑุฏู chunk processing
- `api/youtube.js` - ุงูุฒุงุด ูุญุฏูุฏุช ุจู 100MB
- `api/chunk-processor.js` - ูุงู ุฌุฏุฏ ุจุฑุง ูพุฑุฏุงุฒุด chunk
- `popup.js` - ุจูโุฑูุฒุฑุณุงู ูุญุฏูุฏุชโูุง client-side

---

## ๐ ุฏุณุชูุฑุงุช Deploy

### 1. Commit ุจู Git
```bash
git add api/upload.js api/youtube.js api/chunk-processor.js popup.js
git commit -m "Increase file size capacity to 100MB with chunk processing

- Increase upload limit from 4MB to 100MB
- Increase YouTube limit from 25MB to 100MB
- Add chunk processor for files > 25MB
- Automatically split large files into 20MB chunks
- Combine results with proper timestamp adjustment"
git push origin main
```

### 2. ุขูพููุฏ ุจู ุณุฑูุฑ (WinSCP)
ูุงูโูุง ุฒุฑ ุฑุง ุจู `/var/www/cutup/` ุขูพููุฏ ฺฉูุฏ:
- `api/upload.js`
- `api/youtube.js`
- `api/chunk-processor.js` (ูุงู ุฌุฏุฏ)

### 3. ุฏุณุชูุฑุงุช ุณุฑูุฑ
```bash
ssh root@195.248.240.108
cd /var/www/cutup

# ุจุฑุฑุณ ูุงู ุฌุฏุฏ
ls -la api/chunk-processor.js

# Restart PM2
pm2 restart cutup-api --update-env

# ุจุฑุฑุณ ูุงฺฏโูุง
pm2 logs cutup-api --lines 30
```

---

## โ๏ธ ูฺฉุงุช ููู

### ูุญุฏูุฏุช Whisper API
- Whisper API ุฎูุฏุด ูุญุฏูุฏุช 25MB ุฏุงุฑุฏ
- ุจุฑุง ูุงูโูุง ุจุฒุฑฺฏุชุฑุ ุจู ุตูุฑุช ุฎูุฏฺฉุงุฑ chunk ูโุดููุฏ
- ูุฑ chunk ุจู ุตูุฑุช ุฌุฏุงฺฏุงูู ูพุฑุฏุงุฒุด ูโุดูุฏ

### ุฒูุงู ูพุฑุฏุงุฒุด
- ูุงูโูุง ุจุฒุฑฺฏุชุฑ ุฒูุงู ุจุดุชุฑ ูโุจุฑูุฏ
- ูุฑ chunk ุญุฏูุฏ 1-2 ุฏููู ุฒูุงู ูโุจุฑุฏ
- ูุงู 100MB (5 chunk) ุญุฏูุฏ 5-10 ุฏููู ุฒูุงู ูโุจุฑุฏ

### ุญุงูุธู ุณุฑูุฑ
- ูุงูโูุง ุจุฒุฑฺฏ ุญุงูุธู ุจุดุชุฑ ูุตุฑู ูโฺฉููุฏ
- ูุทูุฆู ุดูุฏ ุณุฑูุฑ ุญุงูุธู ฺฉุงู ุฏุงุฑุฏ (ุญุฏุงูู 2GB RAM)

### ุจูุจูุฏูุง ุขูุฏู
- ุงุณุชูุงุฏู ุงุฒ ffmpeg ุจุฑุง ุชูุณู ุฏููโุชุฑ (ุฏุฑ ููุงุท ุณฺฉูุช)
- ูพุฑุฏุงุฒุด ููุงุฒ chunk ูุง
- Caching ูุชุงุฌ

---

## โ ุชุณุช

1. ฺฉ ูุงู ุตูุช 30-50MB ุขูพููุฏ ฺฉูุฏ
2. ุจุฑุฑุณ ฺฉูุฏ ฺฉู ุจู ุตูุฑุช chunk ูพุฑุฏุงุฒุด ูโุดูุฏ
3. ุจุฑุฑุณ ฺฉูุฏ ฺฉู ูุชุงุฌ ุฏุฑุณุช ุชุฑฺฉุจ ูโุดููุฏ
4. ฺฉ ูุฏู ูุชูุจ 30-50MB ุชุณุช ฺฉูุฏ

---

## ๐ง ุนุจโุงุจ

### ุงฺฏุฑ chunk processing ฺฉุงุฑ ูฺฉุฑุฏ:
```bash
# ุจุฑุฑุณ ูุงฺฏโูุง
pm2 logs cutup-api --lines 50

# ุจุงุฏ ุงู ุฎุทูุท ุฑุง ุจุจูุฏ:
# "UPLOAD: File is larger than 25MB, using chunk processor..."
# "CHUNK_PROCESSOR: Split X MB into Y chunks"
```

### ุงฺฏุฑ ุฎุทุง memory ุฏุงุฏ:
- ุญุงูุธู ุณุฑูุฑ ุฑุง ุจุฑุฑุณ ฺฉูุฏ: `free -h`
- ุงฺฏุฑ ฺฉู ุงุณุชุ ูุงูโูุง ุจุฒุฑฺฏุชุฑ ุฑุง ูุญุฏูุฏ ฺฉูุฏ

### ุงฺฏุฑ timeout ุดุฏ:
- timeout ุฑุง ุฏุฑ `chunk-processor.js` ุงูุฒุงุด ุฏูุฏ
- ุง ูุงู ุฑุง ฺฉูฺฺฉุชุฑ ฺฉูุฏ


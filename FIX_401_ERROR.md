# ุฑูุน ุฎุทุง 401 - Unauthorized

## ๐ ูุดฺฉู
ุฎุทุง 401 ุนู API Key ุฏุฑุณุช ุชูุธู ูุดุฏู ุง ุฏุฑ ุฏุณุชุฑุณ ูุณุช.

## โ ุฑุงูโุญูโูุง ูุฑุญููโุง

### ูุฑุญูู 1: ุจุฑุฑุณ API Key ุฏุฑ Vercel

```bash
# ุจุฑุฑุณ Environment Variables
vercel env ls
```

ุจุงุฏ `OPENAI_API_KEY` ุฑุง ุฏุฑ ูุณุช ุจุจูุฏ.

### ูุฑุญูู 2: ุชูุธู ุง ุจูโุฑูุฒุฑุณุงู API Key

```bash
# ุงฺฏุฑ ูุฌูุฏ ูุฏุงุฑุฏุ ุงุถุงูู ฺฉูุฏ
vercel env add OPENAI_API_KEY production

# ุง ุงฺฏุฑ ูุฌูุฏ ุฏุงุฑุฏ ูู ูโุฎูุงูุฏ ุจูโุฑูุฒ ฺฉูุฏ
vercel env rm OPENAI_API_KEY production
vercel env add OPENAI_API_KEY production
```

ููุช ุงุฒ ุดูุง ุฎูุงุณุชุ ุงู ููุฏุงุฑ ุฑุง ูุงุฑุฏ ฺฉูุฏ:
```
YOUR_OPENAI_API_KEY
```

**โ๏ธ ููู**: 
- ฺฉู API Key ุฑุง ฺฉูพ ฺฉูุฏ (ุงุฒ `sk-proj-` ุชุง ุขุฎุฑ)
- ูฺ ูุงุตูู ุง ฺฉุงุฑุงฺฉุชุฑ ุงุถุงููโุง ูุจุงุดุฏ
- Enter ุฑุง ุจุฒูุฏ ุชุง ุฐุฎุฑู ุดูุฏ

### ูุฑุญูู 3: Deploy ูุฌุฏุฏ

**ุจุนุฏ ุงุฒ ุชูุธู API Keyุ ุญุชูุงู ุจุงุฏ ุฏูุจุงุฑู deploy ฺฉูุฏ:**

```bash
vercel --prod
```

ุงู ฺฉุงุฑ ููู ุงุณุช ฺูู Environment Variables ููุท ุฏุฑ deploy ุจุนุฏ ุงุนูุงู ูโุดููุฏ.

### ูุฑุญูู 4: ุจุฑุฑุณ Logs

ุฏุฑ Vercel Dashboard:
1. ุจู ูพุฑูฺู ุจุฑูุฏ
2. **Functions** โ **Logs** ุฑุง ุจุงุฒ ฺฉูุฏ
3. ฺฉ ุฏุฑุฎูุงุณุช ุชุณุช ุจูุฑุณุชุฏ
4. ูุงฺฏโูุง ุฑุง ุจุฑุฑุณ ฺฉูุฏ

**ุงฺฏุฑ API Key ุฏุฑุณุช ุจุงุดุฏุ ุจุงุฏ ุจุจูุฏ:**
```
TRANSCRIBE: Processing audio file, size: 12345 bytes, type: audio/mpeg
TRANSCRIBE: Success, text length: 500
```

**ุงฺฏุฑ API Key ุงุดุชุจุงู ุจุงุดุฏุ ูโุจูุฏ:**
```
TRANSCRIBE_ERROR: {
  message: "Incorrect API key provided",
  status: 401
}
```

## ๐ง ุจุฑุฑุณโูุง ุงุถุงู

### ุจุฑุฑุณ 1: ูุทูุฆู ุดูุฏ API Key ฺฉุงูู ุงุณุช

API Key ุจุงุฏ ุงู ุดฺฉู ุจุงุดุฏ:
```
sk-proj-... (ุญุฏูุฏ 50+ ฺฉุงุฑุงฺฉุชุฑ)
```

### ุจุฑุฑุณ 2: ุชุณุช ูุณุชูู API

ูโุชูุงูุฏ ูุณุชููุงู API ุฑุง ุชุณุช ฺฉูุฏ:

```bash
curl -X POST https://cutup-a0p9oqk9z-hamidreza-askarizadehs-projects.vercel.app/api/transcribe \
  -H "Content-Type: application/json" \
  -d '{"audioUrl": "data:audio/mpeg;base64,test"}'
```

ุงฺฏุฑ 401 ูโุฏูุฏุ ุนู API Key ูุดฺฉู ุฏุงุฑุฏ.

### ุจุฑุฑุณ 3: ุจุฑุฑุณ ุฏุฑ ฺฉุฏ

ุฏุฑ `api/transcribe.js` ุฎุท 28-34 ุฑุง ุจุฑุฑุณ ฺฉูุฏ:

```javascript
// Check API Key
if (!process.env.OPENAI_API_KEY) {
  console.error('TRANSCRIBE_ERROR: OPENAI_API_KEY is not set');
  return res.status(500).json({ 
    error: 'OPENAI_ERROR', 
    details: 'API Key is not configured' 
  });
}
```

ุงฺฏุฑ ุงู ุฎุทุง ุฑุง ุฏุฑ ูุงฺฏ ูโุจูุฏุ ุนู API Key ุงุตูุงู ุชูุธู ูุดุฏู.

## ๐ ฺฺฉโูุณุช ุณุฑุน

- [ ] `vercel env ls` ุงุฌุฑุง ุดุฏู ู `OPENAI_API_KEY` ูุฌูุฏ ุฏุงุฑุฏ
- [ ] API Key ฺฉุงูู ู ุจุฏูู ูุงุตูู ฺฉูพ ุดุฏู
- [ ] `vercel --prod` ุจุนุฏ ุงุฒ ุชูุธู API Key ุงุฌุฑุง ุดุฏู
- [ ] ูุงฺฏโูุง ุฏุฑ Vercel ุจุฑุฑุณ ุดุฏู
- [ ] ุงูุฒููู ุฏุฑ Chrome reload ุดุฏู

## ๐จ ุงฺฏุฑ ูููุฒ ฺฉุงุฑ ููโฺฉูุฏ

1. **ุจุฑุฑุณ API Key ุฏุฑ OpenAI Dashboard**:
   - ุจู https://platform.openai.com/api-keys ุจุฑูุฏ
   - ูุทูุฆู ุดูุฏ API Key ูุนุงู ุงุณุช
   - ุงฺฏุฑ ูููุถ ุดุฏูุ ฺฉ API Key ุฌุฏุฏ ุจุณุงุฒุฏ

2. **ุชุณุช ุจุง API Key ุฌุฏุฏ**:
   - ฺฉ API Key ุฌุฏุฏ ุงุฒ OpenAI ุจฺฏุฑุฏ
   - ุฏุฑ Vercel ุชูุธู ฺฉูุฏ
   - ุฏูุจุงุฑู deploy ฺฉูุฏ

3. **ุจุฑุฑุณ Billing**:
   - ูุทูุฆู ุดูุฏ ุญุณุงุจ OpenAI ุดูุง ุงุนุชุจุงุฑ ุฏุงุฑุฏ
   - API Key ุจุฏูู ุงุนุชุจุงุฑ ฺฉุงุฑ ููโฺฉูุฏ

## โ ุจุนุฏ ุงุฒ ุฑูุน ูุดฺฉู

ููุช ููู ฺุฒ ฺฉุงุฑ ฺฉุฑุฏ:
1. ฺฉ ูุงู ุตูุช ฺฉูฺฺฉ ุชุณุช ฺฉูุฏ
2. ููุชุธุฑ ูุชุฌู ุจูุงูุฏ (30-60 ุซุงูู)
3. ุงฺฏุฑ ูููู ุจูุฏุ ุขูุงุฏู ุงุณุช! ๐

